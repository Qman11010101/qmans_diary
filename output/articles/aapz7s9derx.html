<!DOCTYPE html>
<html>

<head prefix="og:http://ogp.me/ns#">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>microCMSと連携する静的サイトジェネレータを作ってブログを作ってみた ～その他編～ - Qman's Diary</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Open Graph (OGP) Meta Tags -->
    <meta property="og:title" content="microCMSと連携する静的サイトジェネレータを作ってブログを作ってみた ～その他編～ - Qman's Diary">
    <meta property="og:description" content="先日の記事に引き続き、自作したこのブログの内容を紹介していきます。前回はブログを生成するプログラムに絞ったので、今回はそれ以外の内容になります。microCMSのアドカレに投稿してはいますが、ブログ自…">
    <meta property="og:url" content="https://blog.qmainconts.dev/articles/aapz7s9derx.html">
    <meta property="og:type" content="article">
    <meta property="og:site_name" content="Qman's Diary">
    <meta property="og:image" content="https://blog.qmainconts.dev/assets/icon_large.png">
    <meta property="og:locale" content="ja_JP">

    <!-- Twitter Cards Meta Tags -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="microCMSと連携する静的サイトジェネレータを作ってブログを作ってみた ～その他編～ - Qman's Diary">
    <meta name="twitter:description" content="先日の記事に引き続き、自作したこのブログの内容を紹介していきます。前回はブログを生成するプログラムに絞ったので、今回はそれ以外の内容になります。microCMSのアドカレに投稿してはいますが、ブログ自…">
    <meta name="twitter:url" content="https://blog.qmainconts.dev/articles/aapz7s9derx.html">
    <meta name="twitter:site" content="@QmanEnobikto">

    <!-- その他 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" as="style" fetchpriority="high" href="https://fonts.googleapis.com/css2?family=M+PLUS+1+Code&family=Noto+Sans+JP:wght@400;700&family=Play:wght@700&family=Source+Code+Pro&display=swap" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=M+PLUS+1+Code&family=Noto+Sans+JP:wght@400;700&family=Play:wght@700&family=Source+Code+Pro&display=swap" media="print" onload='this.media="all"' />
    <link rel="stylesheet" href="/assets/css/reset.css">
    <link rel="stylesheet" href="/assets/css/common.css?b=1732532909">
    <link rel="stylesheet" href="/assets/css/article.css?b=1732532909">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/vs2015.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
    <script src="/assets/js/latest_articles.js?b=1732532909"></script>
    <script src="/assets/js/categories.js?b=1732532909"></script>
    <script src="/assets/js/codeblock.js?b=1732532909"></script>
    <script src="/assets/js/time_course.js?b=1732532909"></script>
    <link rel="canonical" href="https://blog.qmainconts.dev/articles/aapz7s9derx.html">
    <meta name="description" content="先日の記事に引き続き、自作したこのブログの内容を紹介していきます。前回はブログを生成するプログラムに絞ったので、今回はそれ以外の内容になります。microCMSのアドカレに投稿してはいますが、ブログ自…">
    <meta name="google-site-verification" content="u0BTjFYkL3nKuJ0DyWuKngSx29oQe4lkzcAgTFfP2bQ" />
</head>


<body>
<header>
    <div id="blogtitle"><a href="/">Qman's Diary</a></div>
    <p>多趣味人間の備忘録</p>
</header>
<main>
        <section id="maincol">
            <section class="box">
                <div class="date">2022-12-18 (2024-08-17 更新)</div>
                <h1 id="articletitle">microCMSと連携する静的サイトジェネレータを作ってブログを作ってみた ～その他編～</h1>
                <div class="tags">
                    <div class="tag"><img src="/assets/tag.svg" alt="タグ" width="18" height="18" draggable="false"></div><div class="tag"><a href="category/advent"></a>Advent Calendar</div><div class="tag"><a href="category/tech"></a>技術</div><div class="tag"><a href="category/microcms"></a>microCMS</div></div><a href="https://qiita.com/advent-calendar/2022/microcms" target="_blank" class="event-banner-link-wrapper">
                    <div class="event-banner">
                        <img src="/assets/event.svg" alt="イベント" width="20" height="20" draggable="false">
                        <p>microCMS Advent Calendar 2022</p>
                    </div>
                </a><div id="time-course-warning"></div>
                <article id="atcbody"><p><a href="https://blog.qmainconts.dev/articles/88zw8xgnxz" target="_blank" rel="noopener noreferrer">先日の記事</a>に引き続き、自作したこのブログの内容を紹介していきます。</p><p>前回はブログを生成するプログラムに絞ったので、今回はそれ以外の内容になります。</p><p>microCMSのアドカレに投稿してはいますが、ブログ自体を紹介していることもあり、別の内容も含まれています。ご了承ください。</p><p><br></p><p>ブログ生成プログラム"microblogen"は <a href="https://github.com/Qman11010101/microblogen" target="_blank" rel="noopener noreferrer">Qman11010101/microblogen</a> に、ブログそのもののリポジトリは <a href="https://github.com/Qman11010101/qmans_diary" target="_blank" rel="noopener noreferrer">Qman11010101/qmans_diary</a> にあります。</p><h2 id="hae6947d5ce">microCMS</h2><p>正に、このブログのコンテンツを支える要です。大変お世話になっています。</p><h3 id="h4545d28d10">選んだ理由</h3><p>元々はローカルで記事を書いてpushしたらデプロイされるという構造を考えていました。実際ローカルで書ければmarkdownなどが使えて自由度が格段に上がります。</p><p>しかし、一方でオンラインエディタがあれば便利だとも思っていました。そんな折に見つけたのがHeadless CMSという概念でした。</p><p>オンラインで編集でき、かつAPIだけが用意されているHeadless CMSは自由度がとても高く、正しく自分のニーズと合致するものでした。</p><h3 id="ha122fd470c">良い点</h3><p>microCMSは日本語に完全対応しており(日本製なのでそれはそう)、ドキュメントも機能も充実していて、さらには対応もしっかりしていて好印象です。</p><p>アカウントにログインできなくなった～とTwitterで呟いたら捕捉してもらって助けていただきました。</p><p>また、自作したブログ生成プログラムはGoで書いたのですが、microCMS公式がGo用のSDKを用意していたおかげでかなり楽に開発できました。</p><h3 id="h073162d4d3">要望</h3><p>欲を言えば以下のような機能が欲しいところです。</p><ul><li>リッチエディタでもHTMLコードを編集できる機能</li><li>特定のクラス名のdiv、もしくは特定のタグを挿入できる機能</li><li>表(table)を挿入できる機能</li><li>markdownサポート</li></ul><p><br></p><p>特に欲しいのは上から2番目でしょうか。注意すべき点などを赤いブロックに分けて表示したいと思っているので、これができれば助かります。</p><p>タグ名についても、HTMLにはセマンティックなタグが結構あるので挿入させてほしいと思っています。</p><h2 id="hb570a6676d">デザイン</h2><h3 id="heeb2fa2989">配色について</h3><p>見て分かる通り、このブログは緑を基調にしたデザインです。シンプルなデザインが好きなので以前は黒背景にしていたのですが、色合いが足りないと感じて思い切って緑色にしてみたところ意外と良かったのでそれを適用しました。</p><p>元々目が悪いこともあってダークテーマが大好きな人間なのですが、白黒ばかりにするのも嫌だったので、文字表示部分には完全な白ではない色を背景にしました。眩しすぎて見づらいといった事態は解消できたかと思いますが、流石に暗すぎるので今後もう少し明るくするかもしれないです。</p><p><br></p><p>使用した色は以下の通りです。</p><ul><li>ヘッダー/フッター #333333 (文字色 #eeeeee)</li><li>背景色 #418d45</li><li>文字表示部分 #dddddd (文字色 #333333)</li><li>リンク #0088cc (訪問済みリンク #7619c2)</li></ul><h3 id="h2e4279038b">列について</h3><p>世の中には様々なサイトがありますが、ブログしかり攻略Wikiしかり、いくつかの列に分けて情報を提示しています。</p><p style="text-align:center"><img src="https://images.microcms-assets.io/assets/0b0ca8a0456441b1913290d8b4a73344/0ef9c6fac31d4a0c82574325e8619989/genshinwiki.png?w=500&amp;h=346" alt="原神 wikiのスクリーンショット" width="500" height="346"></p><p style="text-align:center"><a href="https://wikiwiki.jp/genshinwiki/" target="_blank" rel="noopener noreferrer">原神 Wiki*</a> のスクリーンショット。右にメイン列、左にサブ列がある</p><p style="text-align:center"><br></p><p>メイン列とサブ列に分けることによって、メイン列では<strong>そのページで伝えたい情報</strong>を、サブ列では<strong>常に表示しておきたい別ページへのリンクなど</strong>を表示することができます。</p><p>一部サイトでは3列のレイアウトを採用していますが、このブログでは2列を採用しました。無意味に情報が増えるのも良くないので……</p><h3 id="h5d93f83efa">フォントについて</h3><p>Google FontsからNoto Sans Japaneseを引っ張ってきています。フォントが統一できるというのは良いですね。今どきこの程度の通信量を気にする時代でもないでしょうし。</p><h2 id="hf0d425ae06">GitHub Actions</h2><h3 id="h9e5f467c67">問題点</h3><p>このブログを構築するにあたって、一番重要なことは「記事を公開したら全自動でサイトに反映される」ということでした。</p><p><a href="https://blog.qmainconts.dev/articles/88zw8xgnxz" target="_blank" rel="noopener noreferrer">先日の記事</a>にもあるとおり、このブログは以下のように生成されています。</p><p><br></p><p style="text-align:center"><img src="https://images.microcms-assets.io/assets/0b0ca8a0456441b1913290d8b4a73344/9f33fdf32f5749f297165660fd09a9a1/microblogen_diagram.svg" alt="" width="761" height="301"></p><p><br></p><p>この中央にある、「microblogenで記事を生成する」という部分が個人的な関門でした。GitHub Actions上で自作したGo製プログラムを動作させるにはどうすればいいのかが分からなかったからです。</p><p>最近だとメジャーなものなら<a href="https://github.com/marketplace" target="_blank" rel="noopener noreferrer">Marketplace</a>を探せばありますし、いろいろ複雑な動作をさせるにしてもそれらを組み合わせて動かせば良いということになります。自作した自由なプログラムを動かそうとする場合、一番手っ取り早いのは<code>run</code>を使ってシェル芸をすることですが、今回使いたいのはGoによるプログラムです。</p><h3 id="hc4c05c18f9">解決策</h3><p><a href="https://zenn.dev/ytakaya/articles/55a07808c2fd5e" target="_blank" rel="noopener noreferrer">【Go言語】自作した静的解析ツールをGitHub Actionsで実行する</a> という記事が大変参考になりました。</p><p>この記事を元にした結果、以下のようにすれば良いことがわかりました。</p><ol><li>microblogenを何らかの方法でReleaseする。その際バイナリを用意しておく</li><li>ブログ用リポジトリのGitHub Actionsにおいてmicroblogenを<code>go install</code>して実行する</li><li>生成されたファイルをcommit・pushする</li></ol><h3 id="h9e5f467c67">問題点</h3><p><a href="https://github.com/Qman11010101/qmans_diary" target="_blank" rel="noopener noreferrer">Qman11010101/qmans_diary</a> を見ていただければわかると思うのですが、出力ディレクトリも同じところにあるので、pullするとまるごと完成品まで持ってきてしまいます。</p><p>ブランチを変えるなどすれば多少まともになると思うのですが、そこまで実装する気力はありませんでした……気が向いたらやります。</p><p>あとmicroblogenのバイナリを消すのを忘れていた。</p><h2 id="hc682c23596">Cloudflare Pages</h2><p>このブログのデプロイ先です。最初はGitHub Pagesでいいかと思っていましたが、通信量の制限がそこそこ厳しいらしいということ、WorkersなどでCloudflareにお世話になっていることなどを鑑みて、デプロイ先に選ぶことにしました。</p><p>有名な静的サイトジェネレーターならばCloudflare Pages側でもビルドできるようですが、今回はデプロイ先としてだけの利用になります。</p><p>microCMSに備わっている検索機能が、おそらくCloudflare Pages Functionsと相性が良いので、実装してみたいと思っています。</p><h2 id="ha214098e44">まとめ</h2><p>様々な車輪の再発明をしましたが、クラウド上のVMにnginxでサーバーを立ててHTMLを投げ込むよりはモダンな構成になったので、とりあえずは満足です。</p><p>勉強にはなりましたが、正直記事生成が遅いので自作しないほうがいいと思います。チューニング何もわからない……</p><p>あとmicroCMSは本当に便利です。ありがとうございます。</p></article>
                <div class="widget-wrapper">
                    <div class="widget-child-wrapper">
                        <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-size="large" data-lang="ja" data-show-count="false">Post</a>
                        <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
                    </div>
                    <div class="widget-child-wrapper">
                        <a href="https://b.hatena.ne.jp/entry/" class="hatena-bookmark-button" data-hatena-bookmark-layout="touch-counter" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/v4/public/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" /></a>
                        <script type="text/javascript" src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>
                    </div>
                    <div class="widget-child-wrapper">
                        <button id="misc-share"><img src="/assets/share.svg" width="16" height="16">共有</button>
                    </div>
                </div>
            </section>
            <section class="box">
                <section class="widgetgroup" id="recent">
                    <div class="widgetindex">Recent Articles</div>
                    <div id="recent-articles"></div>
                </section>
            </section>
        </section>
<section id="subcol">
    <div class="box">
        <div class="subcolbtn">
            <a href="https://qmainconts.dev/"></a>
            >> キューマンのコンテンツ置き場
        </div>
        <section class="widgetgroup">
            <h3 class="widgetindex">Profile</h3>
            <p>オタクコンテンツで命を繋いでいる人間</p>
        </section>
        <section class="widgetgroup">
            <h3 class="widgetindex">Accounts</h3>
            <ul>
                <li>X: <a href="https://x.com/QmanEnobikto" target="_blank">@QmanEnobikto</a>
                </li>
                <li>GitHub: <a href="https://github.com/Qman11010101" target="_blank">Qman11010101</a></li>
                <li>Qiita: <a href="https://qiita.com/KjumanEnobikto" target="_blank">@KjumanEnobikto</a>
                </li>
                <li>Zenn: <a href="https://zenn.dev/kjumanenobikto" target="_blank">@kjumanenobikto</a></li>
                <li>カクヨム: <a href="https://kakuyomu.jp/users/QmanEnobikto" target="_blank">QmanEnobikto</a>
                </li>
            </ul>
        </section>
        <section class="widgetgroup">
            <h3 class="widgetindex">Category</h3>
            <div id="categorydisplay">
            </div>
        </section>
    </div>
</section>
</main>
    <footer>
        <p>当ホームページに記載されている会社名・製品名・システム名などは、各社の登録商標、もしくは商標です。</p>
        <p>© 2022 Kjuman Enobikto All rights reserved.</p>
    </footer>
</body>

</html>